{"version":3,"sources":["webpack:///./src/views/User.vue?7d73","webpack:///./src/views/User.vue?ee3a","webpack:///src/views/User.vue","webpack:///./src/views/User.vue?c7ea","webpack:///./src/views/User.vue?1f52","webpack:///./src/utils/mixins.js","webpack:///./src/assets/arrow.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","currentStatus","on","afterCreateTweetModal","_v","_s","user","name","tweets","length","likes","Followers","Followings","replyTweets","handleAddLike","handleDeleteLike","handleUpdate","handleDeleteLikePost","handleRemoveFollowship","handleAddFollowship","handleDelFollowship","handleCancelCover","handleReplyModal","topUsers","handleRemovePop","handleAddPop","staticRenderFns","components","Navbar","PopularUsers","computed","mapState","created","fetchUser","userId","fetchTweets","fetchLikes","fetchReplies","fetchFollowers","fetchFollowings","$watch","data","isIndex","isPublic","isPrivate","isUser","isSetting","id","avatar","introduction","account","cover","followersLength","followingsLength","isLoading","methods","usersAPI","console","Toast2","title","fetchTopUsers","tweetId","tweetsAPI","tweet","LikesCount","isLiked","Toast","icon","formData","isFollowed","payload","UserId","image","description","createdAt","RepliesCount","User","unshift","createaData","status","map","like","TweetId","component","emptyImageFilter","filters","emptyImage","src","module","exports"],"mappings":"kHAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACF,EAAG,MAAM,CAACE,YAAY,UAAU,CAACF,EAAG,SAAS,CAACG,MAAM,CAAC,iBAAiBP,EAAIQ,eAAeC,GAAG,CAAC,2BAA2BT,EAAIU,0BAA0B,GAAGN,EAAG,MAAM,CAACE,YAAY,QAAQ,CAACF,EAAG,SAAS,CAACE,YAAY,UAAU,CAACF,EAAG,SAAS,CAACA,EAAG,cAAc,CAACG,MAAM,CAAC,GAAK,UAAU,CAACH,EAAG,MAAM,CAACE,YAAY,eAAeC,MAAM,CAAC,IAAM,EAAQ,QAAyB,IAAM,kBAAkB,GAAGH,EAAG,MAAM,CAACE,YAAY,SAAS,CAACF,EAAG,IAAI,CAACE,YAAY,aAAa,CAACN,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIa,KAAKC,SAASV,EAAG,IAAI,CAACE,YAAY,cAAc,CAACN,EAAIW,GAAGX,EAAIY,GAAGZ,EAAIe,OAAOC,QAAQ,aAAaZ,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,KAAOP,EAAIa,KAAK,OAASb,EAAIe,OAAO,MAAQf,EAAIiB,MAAM,UAAYjB,EAAIkB,UAAU,WAAalB,EAAImB,WAAW,QAAUnB,EAAIoB,aAAaX,GAAG,CAAC,aAAaT,EAAIqB,cAAc,oBAAoBrB,EAAIsB,iBAAiB,eAAetB,EAAIuB,aAAa,uBAAuBvB,EAAIwB,qBAAqB,0BAA0BxB,EAAIyB,uBAAuB,uBAAuBzB,EAAI0B,oBAAoB,uBAAuB1B,EAAI2B,oBAAoB,qBAAqB3B,EAAI4B,kBAAkB,2BAA2B5B,EAAI6B,qBAAqB,KAAKzB,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,eAAe,CAACG,MAAM,CAAC,kBAAkBP,EAAI8B,UAAUrB,GAAG,CAAC,mBAAmBT,EAAI+B,gBAAgB,gBAAgB/B,EAAIgC,iBAAiB,MACj8CC,EAAkB,G,kLC6DP,GACbnB,KAAMA,OAENoB,WAAYA,CACVC,OAAJA,OACIC,aAAJA,QAEEC,SAAUA,kBACZC,mDAEEC,QAVF,WAUA,WACA,wBACItC,KAAKuC,UAAUC,GACfxC,KAAKyC,YAAYD,GACjBxC,KAAK0C,WAAWF,GAChBxC,KAAK2C,aAAaH,GAClBxC,KAAK4C,eAAeJ,GACpBxC,KAAK6C,gBAAgBL,GACrBxC,KAAK8C,QACT,WAAM,OAAN,mBACA,cACM,GAAN,YAAM,CAGE,IAAR,OACQ,EAAR,aACQ,EAAR,eACQ,EAAR,cACQ,EAAR,gBACQ,EAAR,kBACQ,EAAR,wBAMEC,KApCF,WAqCI,MAAO,CACLxC,cAAeA,CACbyC,SAASA,EACTC,UAAUA,EACVC,WAAWA,EACXC,QAAQA,EACRC,WAAWA,GAEbxC,KAAMA,CACJyC,IAAKA,EACLxC,KAAMA,GACNyC,OAAQA,GACRC,aAAcA,GACdC,QAASA,GACTC,MAAOA,GACPC,gBAAiBA,EACjBC,iBAAkBA,GAEpB7C,OAAQA,GACRK,YAAaA,GACbH,MAAOA,GACPC,UAAWA,GACXC,WAAYA,GACZW,SAAUA,GACV+B,WAAWA,IAGfC,QAASA,CACPtB,UADJ,SACAC,GAAA,gMAEA,eAFA,SAGAsB,YAAAtB,WAHA,gBAGAO,EAHA,EAGAA,KACA,8BACAgB,+BACAC,aACAC,sBAIAZ,EAQAN,EARAM,GACAxC,EAOAkC,EAPAlC,KACAyC,EAMAP,EANAO,OACAC,EAKAR,EALAQ,aACAC,EAIAT,EAJAS,QACAC,EAGAV,EAHAU,MACAxC,EAEA8B,EAFA9B,UACAC,EACA6B,EADA7B,WAEA,QACAmC,KACAxC,OACAyC,SACAC,eACAC,UACAC,QACAC,6BACAC,+BAEA,eA9BA,qDAgCAI,0BACAC,aACAC,uBAlCA,6DAsCIxB,YAvCJ,SAuCAD,GAAA,yLAEAsB,kBAAAtB,WAFA,mBAEAO,EAFA,EAEAA,MACAA,UAHA,uBAIA,YAJA,6BAOAA,wCAPA,wBAQAgB,+BACAC,aACAC,mBAEA,YAZA,2BAeA,WAfA,qDAiBAF,0BACAC,aACAC,uBAnBA,6DAuBItB,aA9DJ,SA8DAH,GAAA,yLAEAsB,mBAAAtB,WAFA,mBAEAO,EAFA,EAEAA,MACAA,UAHA,uBAIA,iBAJA,6BAOAA,gCAPA,wBAQAgB,+BACAC,aACAC,sBAEA,iBAZA,2BAeA,gBAfA,qDAiBAF,0BACAC,aACAC,uBAnBA,6DAwBIvB,WAtFJ,SAsFAF,GAAA,yLAEAsB,iBAAAtB,WAFA,mBAEAO,EAFA,EAEAA,KAGA,gEADAA,UAJA,uBAOAiB,aACAC,oBAEA,WAVA,8BAaAlB,UAbA,wBAcAgB,+BACAC,aACAC,oBAEA,WAlBA,2BAqBA,UArBA,qDAuBAF,0BACAC,aACAC,uBAEA,WA3BA,6DA8BIrB,eApHJ,SAoHAJ,GAAA,yLAEAsB,qBAAAtB,WAFA,mBAEAO,EAFA,EAEAA,MACAA,UAHA,uBAIAgB,+BACA,eALA,0BAQA,cARA,qDAUAA,0BACAC,aACAC,uBAZA,6DAgBIpB,gBApIJ,SAoIAL,GAAA,yLAEAsB,sBAAAtB,WAFA,mBAEAO,EAFA,EAEAA,MACAA,UAHA,uBAIA,gBAJA,0BAOA,eAPA,qDASAgB,0BACAC,aACAC,kCAXA,6DAeIC,cAnJJ,WAmJA,yLAEAJ,oBAFA,gBAEAf,EAFA,EAEAA,KACA,aAHA,mDAKAgB,0BACAC,aACAC,uBAPA,4DAWI7C,cA9JJ,SA8JA+C,GAAA,yLAEAC,gBAAAD,YAFA,mBAEApB,EAFA,EAEAA,KACAA,mBAHA,sBAIA,qBAJA,OAMA,mCACA,qBACA,iCACAsB,GADA,IAEAC,0BACAC,aAGA,KAdA,qDAiBAR,0BACAC,aACAC,uBAnBA,6DAuBI5C,iBArLJ,SAqLA8C,GAAA,yLAEAC,mBAAAD,YAFA,mBAEApB,EAFA,EAEAA,KACAA,mBAHA,sBAIA,qBAJA,OAMA,mCACA,qBACA,iCACAsB,GADA,IAEAC,0BACAC,aAGA,KAdA,qDAiBAR,0BACAC,aACAC,uBAnBA,6DAuBI1C,qBA5MJ,SA4MA4C,GAAA,yLAEAC,mBAAAD,YAFA,mBAEApB,EAFA,EAEAA,KACAA,mBAHA,sBAIA,qBAJA,OAMA,oCACA,wBAGAyB,aACAP,kBAXA,qDAcAF,0BACAC,aACAC,uBAhBA,6DAoBIzC,uBAhOJ,SAgOAgB,GAAA,yLAEAsB,yBAAAtB,WAFA,mBAEAO,EAFA,EAEAA,KACAA,+CAHA,uBAIAgB,+BACAC,aACAC,mBANA,6BAUAlB,uDAVA,wBAWAgB,+BACAC,aACAC,iBAbA,2BAiBAO,aACAP,kBAIA,8CACA,4BAGA,mBAEA,kBA5BA,qDA8BAF,0BACAC,aACAS,aACAR,uBAjCA,6DAqCIxC,oBArQJ,SAqQAe,GAAA,kLAEAkC,EAAA,CAAArB,MAFA,SAGAS,sBAAAY,aAHA,mBAGA3B,EAHA,EAGAA,KACAA,0DAJA,uBAKAiB,aACAC,kBANA,0BAUA,8CACAD,aACAC,kBAIA,yCACA,wBACA,iCACArD,GADA,IAEA+D,gBAGA,KAEAH,aACAP,kBAEA,6BAEA,mBAEA,kBAhCA,qDAkCAF,0BACAC,aACAC,uBApCA,6DAwCIvC,oBA7SJ,SA6SAc,GAAA,yLAEAsB,yBAAAtB,WAFA,mBAEAO,EAFA,EAEAA,KACAA,+CAHA,uBAIAgB,+BACAC,aACAC,mBANA,6BAUAlB,uDAVA,wBAWAgB,+BACAC,aACAC,iBAbA,2BAiBAO,aACAP,kBAIA,yCACA,wBACA,iCACArD,GADA,IAEA+D,gBAGA,KAGA,mBAEA,kBAlCA,qDAoCAZ,0BACAC,aACAC,uBAtCA,6DA0CI3C,aAvVJ,SAuVAoD,GACM,IAAN,+CACM1E,KAAKY,KAAO,iCAClB,WADA,IAEQC,KAARA,EACQyC,OAARA,EACQG,MAARA,EACQF,aAARA,IAEMvD,KAAKyC,YAAYzC,KAAKY,KAAKyC,IAC3BrD,KAAKuC,UAAUvC,KAAKY,KAAKyC,IACzBrD,KAAKkE,gBACLlE,KAAK0C,WAAW1C,KAAKY,KAAKyC,IAC1BrD,KAAK2C,aAAa3C,KAAKY,KAAKyC,KAE9BvB,gBAtWJ,WAuWM9B,KAAKY,KAAK+C,kBAEZ5B,aAzWJ,WA0WM/B,KAAKY,KAAK+C,kBAEZlD,sBA5WJ,SA4WAmE,GACM,IACNC,EAQAD,EARAC,OACAhE,EAOA+D,EAPA/D,KACAiE,EAMAF,EANAE,MACAtB,EAKAoB,EALApB,QACAuB,EAIAH,EAJAG,YACAC,EAGAJ,EAHAI,UACAV,EAEAM,EAFAN,WACAW,EACAL,EADAK,aAEA,GACQD,UAARA,EACQD,YAARA,EACQD,MAARA,EACQR,WAARA,EACQW,aAARA,EACQC,KAAMA,CACJ7B,GAAIA,EACJxC,KAAVA,EACU2C,QAAVA,EACUF,OAAQA,GAEViB,SAASA,GAEXvE,KAAKc,OAAOqE,QAAQC,IAEtBzD,kBAvYJ,WAwYM3B,KAAKY,KAAK6C,MAAQ,IAEpB7B,iBA1YJ,YA0YA,sBACqB,WAAXyD,EACFrF,KAAKc,OAASd,KAAKc,OAAOwE,KAAI,SAAtC,GACU,OAAIjB,EAAMF,UAAYd,EAAGc,QAChB,iCACnBE,GADA,IAEcY,aAAcA,EAAMA,aAAeA,IAGhCZ,KAEjB,cACQrE,KAAKgB,MAAQhB,KAAKgB,MAAMsE,KAAI,SAApC,GAIU,OAHIC,EAAKC,UAAYnC,EAAGc,SACtBoB,EAAKA,MAAMA,eAENA,SCxhB6T,I,wBCQ1UE,EAAY,eACd,EACA3F,EACAkC,GACA,EACA,KACA,WACA,MAIa,aAAAyD,E,2CCnBf,kCAAO,IAAMC,EAAmB,CAC9BC,QAAS,CACPC,WADO,SACKC,GACV,OAAOA,GAAO,+D,0CCHpBC,EAAOC,QAAU","file":"js/chunk-7f5a2ec5.f28b254f.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=style&index=0&id=084d4d34&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"navbar\"},[_c('Navbar',{attrs:{\"current-status\":_vm.currentStatus},on:{\"after-create-tweet-modal\":_vm.afterCreateTweetModal}})],1),_c('div',{staticClass:\"main\"},[_c('header',{staticClass:\"header\"},[_c('button',[_c('router-link',{attrs:{\"to\":\"/main\"}},[_c('img',{staticClass:\"previous-btn\",attrs:{\"src\":require(\"./../assets/arrow.png\"),\"alt\":\"backarrow\"}})])],1),_c('div',{staticClass:\"title\"},[_c('p',{staticClass:\"user-name\"},[_vm._v(_vm._s(_vm.user.name))]),_c('p',{staticClass:\"user-tweet\"},[_vm._v(_vm._s(_vm.tweets.length)+\" 推文\")])])]),_c('div',{staticClass:\"user-page-body\"},[_c('router-view',{attrs:{\"user\":_vm.user,\"tweets\":_vm.tweets,\"likes\":_vm.likes,\"followers\":_vm.Followers,\"followings\":_vm.Followings,\"replies\":_vm.replyTweets},on:{\"after-like\":_vm.handleAddLike,\"after-delete-like\":_vm.handleDeleteLike,\"after-update\":_vm.handleUpdate,\"after-delete-on-like\":_vm.handleDeleteLikePost,\"after-remove-followship\":_vm.handleRemoveFollowship,\"after-add-followship\":_vm.handleAddFollowship,\"after-del-followship\":_vm.handleDelFollowship,\"after-cancel-cover\":_vm.handleCancelCover,\"after-create-reply-modal\":_vm.handleReplyModal}})],1)]),_c('div',{staticClass:\"popular-users\"},[_c('PopularUsers',{attrs:{\"change-top-user\":_vm.topUsers},on:{\"after-remove-pop\":_vm.handleRemovePop,\"after-add-pop\":_vm.handleAddPop}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <div class=\"navbar\">\r\n      <Navbar\r\n        :current-status=\"currentStatus\"\r\n        @after-create-tweet-modal=\"afterCreateTweetModal\"\r\n      />\r\n    </div>\r\n    <div class=\"main\">\r\n      <header class=\"header\">\r\n        <button>\r\n          <router-link to=\"/main\"\r\n            ><img\r\n              src=\"./../assets/arrow.png\"\r\n              alt=\"backarrow\"\r\n              class=\"previous-btn\"\r\n            />\r\n          </router-link>\r\n        </button>\r\n        <div class=\"title\">\r\n          <p class=\"user-name\">{{ user.name }}</p>\r\n          <p class=\"user-tweet\">{{ tweets.length }} 推文</p>\r\n        </div>\r\n      </header>\r\n      <div class=\"user-page-body\">\r\n        <router-view\r\n          :user=\"user\"\r\n          :tweets=\"tweets\"\r\n          :likes=\"likes\"\r\n          :followers=\"Followers\"\r\n          :followings=\"Followings\"\r\n          :replies=\"replyTweets\"\r\n          @after-like=\"handleAddLike\"\r\n          @after-delete-like=\"handleDeleteLike\"\r\n          @after-update=\"handleUpdate\"\r\n          @after-delete-on-like=\"handleDeleteLikePost\"\r\n          @after-remove-followship=\"handleRemoveFollowship\"\r\n          @after-add-followship=\"handleAddFollowship\"\r\n          @after-del-followship=\"handleDelFollowship\"\r\n          @after-cancel-cover=\"handleCancelCover\"\r\n          @after-create-reply-modal=\"handleReplyModal\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"popular-users\">\r\n      <PopularUsers\r\n        :change-top-user=\"topUsers\"\r\n        @after-remove-pop=\"handleRemovePop\"\r\n        @after-add-pop=\"handleAddPop\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Navbar from \"../components/Navbar.vue\";\r\nimport PopularUsers from \"../components/PopularUsers.vue\";\r\nimport usersAPI from \"./../apis/users\";\r\nimport tweetsAPI from \"./../apis/tweets\";\r\nimport { Toast, Toast2 } from \"./../utils/helper\";\r\nimport { mapState } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"User\",\r\n\r\n  components: {\r\n    Navbar,\r\n    PopularUsers,\r\n  },\r\n  computed: {\r\n    ...mapState([\"currentUser\", \"isAuthenticated\"]),\r\n  },\r\n  created() {\r\n    const userId = this.$route.params.id;\r\n    this.fetchUser(userId);\r\n    this.fetchTweets(userId);\r\n    this.fetchLikes(userId);\r\n    this.fetchReplies(userId);\r\n    this.fetchFollowers(userId);\r\n    this.fetchFollowings(userId);\r\n    this.$watch(\r\n      () => this.$route.params,\r\n      (newV, oldV) => {\r\n        if (newV.id === oldV.id) {\r\n          return;\r\n        } else {\r\n          const userId = newV.id;\r\n          this.fetchUser(userId);\r\n          this.fetchTweets(userId);\r\n          this.fetchLikes(userId);\r\n          this.fetchReplies(userId);\r\n          this.fetchFollowers(userId);\r\n          this.fetchFollowings(userId);\r\n        }\r\n      }\r\n    );\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      currentStatus: {\r\n        isIndex: false,\r\n        isPublic: false,\r\n        isPrivate: false,\r\n        isUser: true,\r\n        isSetting: false,\r\n      },\r\n      user: {\r\n        id: -1,\r\n        name: \"\",\r\n        avatar: \"\",\r\n        introduction: \"\",\r\n        account: \"\",\r\n        cover: \"\",\r\n        followersLength: 0,\r\n        followingsLength: 0,\r\n      },\r\n      tweets: [],\r\n      replyTweets: [],\r\n      likes: [],\r\n      Followers: [],\r\n      Followings: [],\r\n      topUsers: [],\r\n      isLoading: true,\r\n    };\r\n  },\r\n  methods: {\r\n    async fetchUser(userId) {\r\n      try {\r\n        this.isLoading = true;\r\n        const { data } = await usersAPI.get({ userId });\r\n        if (data.message === \"Error: 帳號不存在！\") {\r\n          console.log(\"error\", data.message);\r\n          Toast2.fire({\r\n            title: \"無此帳號，請稍後再試\",\r\n          });\r\n        }\r\n        const {\r\n          id,\r\n          name,\r\n          avatar,\r\n          introduction,\r\n          account,\r\n          cover,\r\n          Followers,\r\n          Followings,\r\n        } = data;\r\n        this.user = {\r\n          id,\r\n          name,\r\n          avatar,\r\n          introduction,\r\n          account,\r\n          cover,\r\n          followersLength: Followers ? Followers.length : 0,\r\n          followingsLength: Followings ? Followings.length : 0,\r\n        };\r\n        this.isLoading = false;\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取得資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async fetchTweets(userId) {\r\n      try {\r\n        const { data } = await usersAPI.getTweets({ userId });\r\n        if (data.isEmpty) {\r\n          this.tweets = [];\r\n          return;\r\n        }\r\n        if (data.message === \"Error: User has no tweets\") {\r\n          console.log(\"error\", data.message);\r\n          Toast2.fire({\r\n            title: \"目前沒有推文內容\",\r\n          });\r\n          this.tweets = [];\r\n          return;\r\n        }\r\n        this.tweets = data;\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取得資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async fetchReplies(userId) {\r\n      try {\r\n        const { data } = await usersAPI.getReplies({ userId });\r\n        if (data.isEmpty) {\r\n          this.replyTweets = [];\r\n          return;\r\n        }\r\n        if (data.message === \"Error: No replies\") {\r\n          console.log(\"error\", data.message);\r\n          Toast2.fire({\r\n            title: \"目前沒有推文及回覆內容\",\r\n          });\r\n          this.replyTweets = [];\r\n          return;\r\n        }\r\n        this.replyTweets = data;\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取得資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    // empty:處理面對空值的回傳方法\r\n    async fetchLikes(userId) {\r\n      try {\r\n        const { data } = await usersAPI.getLikes({ userId });\r\n        if (\r\n          data.message ===\r\n          \"TypeError: Cannot read properties of null (reading 'Likes')\"\r\n        ) {\r\n          Toast2.fire({\r\n            title: \"目前沒有喜歡的內容\",\r\n          });\r\n          this.likes = [];\r\n          return;\r\n        }\r\n        if (data.isEmpty) {\r\n          console.log(\"error\", data.message);\r\n          Toast2.fire({\r\n            title: \"目前沒有喜歡的內容\",\r\n          });\r\n          this.likes = [];\r\n          return;\r\n        }\r\n        this.likes = data;\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取得資料，請稍後再試\",\r\n        });\r\n        this.likes = [];\r\n      }\r\n    },\r\n    async fetchFollowers(userId) {\r\n      try {\r\n        const { data } = await usersAPI.getFollowers({ userId });\r\n        if (data.isEmpty) {\r\n          console.log(\"error\", data.isEmpty);\r\n          this.Followers = [];\r\n          return;\r\n        }\r\n        this.Followers = data;\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取得資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async fetchFollowings(userId) {\r\n      try {\r\n        const { data } = await usersAPI.getFollowings({ userId });\r\n        if (data.isEmpty) {\r\n          this.Followings = [];\r\n          return;\r\n        }\r\n        this.Followings = data;\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取得該Followings資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async fetchTopUsers() {\r\n      try {\r\n        const { data } = await usersAPI.getTopUser();\r\n        this.topUsers = data;\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取得資料，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async handleAddLike(tweetId) {\r\n      try {\r\n        const { data } = await tweetsAPI.addLike({ tweetId });\r\n        if (data.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        this.tweets = this.tweets.map((tweet) => {\r\n          if (tweet.tweetId === tweetId) {\r\n            return {\r\n              ...tweet,\r\n              LikesCount: tweet.LikesCount + 1,\r\n              isLiked: true,\r\n            };\r\n          }\r\n          return tweet;\r\n        });\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法新增喜歡，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async handleDeleteLike(tweetId) {\r\n      try {\r\n        const { data } = await tweetsAPI.deleteLike({ tweetId });\r\n        if (data.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        this.tweets = this.tweets.map((tweet) => {\r\n          if (tweet.tweetId === tweetId) {\r\n            return {\r\n              ...tweet,\r\n              LikesCount: tweet.LikesCount - 1,\r\n              isLiked: false,\r\n            };\r\n          }\r\n          return tweet;\r\n        });\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取消喜歡，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async handleDeleteLikePost(tweetId) {\r\n      try {\r\n        const { data } = await tweetsAPI.deleteLike({ tweetId });\r\n        if (data.status === \"error\") {\r\n          throw new Error(data.message);\r\n        }\r\n        this.likes = this.likes.filter((like) => {\r\n          return like.TweetId !== tweetId;\r\n        });\r\n\r\n        Toast.fire({\r\n          title: \"成功取消喜歡！\",\r\n        });\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取消喜歡，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async handleRemoveFollowship(userId) {\r\n      try {\r\n        const { data } = await usersAPI.removeFollowship({ userId });\r\n        if (data.message === \"Error: Cannot unfollow yourself!\") {\r\n          console.log(\"error\", data.message);\r\n          Toast2.fire({\r\n            title: \"不能取消跟隨自己\",\r\n          });\r\n          return;\r\n        }\r\n        if (data.message === \"Error: You have not followed this user.!\") {\r\n          console.log(\"error\", data.message);\r\n          Toast2.fire({\r\n            title: \"已經取消跟隨\",\r\n          });\r\n          return;\r\n        }\r\n        Toast.fire({\r\n          title: \"成功取消跟隨！\",\r\n        });\r\n\r\n        // 從Followings清單中移除相同id的人\r\n        this.Followings = this.Followings.filter((user) => {\r\n          return user.followingId !== userId;\r\n        });\r\n        // 正在跟隨人數變少\r\n        this.followingsLength - 1;\r\n        // 重整topuser資料\r\n        this.fetchTopUsers();\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          icon: \"error\",\r\n          title: \"無法取消跟隨，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async handleAddFollowship(userId) {\r\n      try {\r\n        const formData = { id: userId };\r\n        const { data } = await usersAPI.addFollowship({ formData });\r\n        if (data.message === \"Error: You are already following this user.\") {\r\n          Toast2.fire({\r\n            title: \"已經跟隨該用戶\",\r\n          });\r\n          return;\r\n        }\r\n        if (data.message === \"Error: Cannot follow yourself!\") {\r\n          Toast2.fire({\r\n            title: \"無法跟隨此用戶\",\r\n          });\r\n        }\r\n        // 對原本沒有跟隨的人跟隨\r\n        this.Followers = this.Followers.map((user) => {\r\n          if (user.followerId === userId) {\r\n            return {\r\n              ...user,\r\n              isFollowed: true,\r\n            };\r\n          }\r\n          return user;\r\n        });\r\n        Toast.fire({\r\n          title: \"成功跟隨此用戶\",\r\n        });\r\n        this.fetchFollowings(this.user.id);\r\n        // 跟隨人數加1\r\n        this.followingsLength + 1;\r\n        // 重整topuser資料\r\n        this.fetchTopUsers();\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法新增跟隨，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    async handleDelFollowship(userId) {\r\n      try {\r\n        const { data } = await usersAPI.removeFollowship({ userId });\r\n        if (data.message === \"Error: Cannot unfollow yourself!\") {\r\n          console.log(\"error\", data.message);\r\n          Toast2.fire({\r\n            title: \"不能取消跟隨自己\",\r\n          });\r\n          return;\r\n        }\r\n        if (data.message === \"Error: You have not followed this user.!\") {\r\n          console.log(\"error\", data.message);\r\n          Toast2.fire({\r\n            title: \"已經取消跟隨\",\r\n          });\r\n          return;\r\n        }\r\n        Toast.fire({\r\n          title: \"成功取消跟隨！\",\r\n        });\r\n\r\n        // 改變跟隨的狀態\r\n        this.Followers = this.Followers.map((user) => {\r\n          if (user.followerId === userId) {\r\n            return {\r\n              ...user,\r\n              isFollowed: false,\r\n            };\r\n          }\r\n          return user;\r\n        });\r\n        // 正在跟隨人數變少\r\n        this.followingsLength - 1;\r\n        // 重整topuser資料\r\n        this.fetchTopUsers();\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n        Toast2.fire({\r\n          title: \"無法取消跟隨，請稍後再試\",\r\n        });\r\n      }\r\n    },\r\n    handleUpdate(formData) {\r\n      const { name, avatar, cover, introduction } = formData;\r\n      this.user = {\r\n        ...this.user,\r\n        name,\r\n        avatar,\r\n        cover,\r\n        introduction,\r\n      };\r\n      this.fetchTweets(this.user.id);\r\n      this.fetchUser(this.user.id);\r\n      this.fetchTopUsers();\r\n      this.fetchLikes(this.user.id);\r\n      this.fetchReplies(this.user.id);\r\n    },\r\n    handleRemovePop() {\r\n      this.user.followingsLength - 1;\r\n    },\r\n    handleAddPop() {\r\n      this.user.followingsLength + 1;\r\n    },\r\n    afterCreateTweetModal(payload) {\r\n      const {\r\n        UserId,\r\n        name,\r\n        image,\r\n        account,\r\n        description,\r\n        createdAt,\r\n        LikesCount,\r\n        RepliesCount,\r\n      } = payload;\r\n      const createaData = {\r\n        createdAt,\r\n        description,\r\n        image,\r\n        LikesCount,\r\n        RepliesCount,\r\n        User: {\r\n          id: UserId,\r\n          name,\r\n          account,\r\n          avatar: image,\r\n        },\r\n        isLiked: false,\r\n      };\r\n      this.tweets.unshift(createaData);\r\n    },\r\n    handleCancelCover() {\r\n      this.user.cover = \"\";\r\n    },\r\n    handleReplyModal({ id, status }) {\r\n      if (status === \"tweets\") {\r\n        this.tweets = this.tweets.map((tweet) => {\r\n          if (tweet.tweetId === id.tweetId) {\r\n            return {\r\n              ...tweet,\r\n              RepliesCount: tweet.RepliesCount + 1,\r\n            };\r\n          }\r\n          return tweet;\r\n        });\r\n      } else if (status === \"likes\") {\r\n        this.likes = this.likes.map((like) => {\r\n          if (like.TweetId === id.tweetId) {\r\n            like.Tweet.repliesCount++;\r\n          }\r\n          return like;\r\n        });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"@/styles/variables.scss\";\r\n.container {\r\n  display: grid;\r\n  grid-template-columns: 210px 600px 350px;\r\n  column-gap: 30px;\r\n}\r\n.main {\r\n  width: 100%;\r\n  height: auto;\r\n}\r\n.header {\r\n  width: 100%;\r\n  height: 55px;\r\n  display: flex;\r\n  align-content: center;\r\n  border: {\r\n    left: 1px solid #e6ecf0;\r\n    right: 1px solid #e6ecf0;\r\n  }\r\n  .previous-btn {\r\n    width: 17px;\r\n    height: 14px;\r\n    margin: 20px;\r\n  }\r\n  .title {\r\n    margin-left: 1rem;\r\n    .user-name {\r\n      font-weight: 900;\r\n      font-size: 19px;\r\n    }\r\n    .user-tweet {\r\n      font-weight: 500;\r\n      font-size: 13px;\r\n      color: $secondaryTextColor;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./User.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./User.vue?vue&type=template&id=084d4d34&scoped=true&\"\nimport script from \"./User.vue?vue&type=script&lang=js&\"\nexport * from \"./User.vue?vue&type=script&lang=js&\"\nimport style0 from \"./User.vue?vue&type=style&index=0&id=084d4d34&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"084d4d34\",\n  null\n  \n)\n\nexport default component.exports","export const emptyImageFilter = {\r\n  filters: {\r\n    emptyImage (src) {\r\n      return src || 'https://via.placeholder.com/350x220/DFDFDF?text=No+Image'\r\n    }\r\n  }\r\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAOCAYAAADJ7fe0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABTSURBVHgBrdLRCQAgCATQo0ncfylHKRTqQwrM88Cojx6UYl6iqlNEvDLBCwBQQyJg5y+kChyEARxhAUc2UC27P9CRlufYQn/s3tAtZqH+sY9QFlmZh9qG/+G4HQAAAABJRU5ErkJggg==\""],"sourceRoot":""}